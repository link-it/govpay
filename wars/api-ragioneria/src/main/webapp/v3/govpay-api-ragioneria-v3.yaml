openapi: 3.0.0
info:
  version: "3.0.0"
  title: GovPay - API Ragioneria
  contact:
    name: GitHub Project Page
    url: 'https://github.com/link-it/GovPay/'
  license:
    name: GPL
    url: 'https://github.com/link-it/GovPay/blob/master/LICENSE'
servers:
  - url: /govpay/backend/api/ragioneria/rs/basic/v3/
tags:
  - name: Transazioni
    description: Consultazione delle transazioni di pagamento eseguite con pagoPA    
  - name: Rendicontazioni
    description: Consultazione delle rendicontazioni emesse da pagoPA
  - name: Riscossioni
    description: Consultazione delle riscossioni eseguite da pagoPA
  - name: Riconciliazioni
    description: Esecuzione e consultazione delle riconciliazioni
  - name: Utenti
    description: Anagrafica degli Utenti
security:
  - basicAuth: []    
paths:
  '/flussiRendicontazione':
    get:
      summary: Elenco dei flussi di rendicontazione acquisite da pagoPa
      operationId: findFlussiRendicontazione
      tags:
        - Rendicontazioni
      parameters:
        - $ref: '#/components/parameters/offset'
        - $ref: '#/components/parameters/limit'
        - $ref: '#/components/parameters/fields'
        - $ref: '#/components/parameters/sort'
        - $ref: '#/components/parameters/idDominio'
        - $ref: '#/components/parameters/dataDa'
        - $ref: '#/components/parameters/dataA'
      responses:
        '200':
          description: Lista dei flussi rendicontazione
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/FlussiRendicontazione'
        '400':
          $ref: '#/components/responses/400BadRequest'                
        '401':
          $ref: '#/components/responses/401NotAuthenticated'
        '403':
          $ref: '#/components/responses/403NotAuthorized'
        '503':
          $ref: '#/components/responses/503ServiceUnavailable'
  '/flussiRendicontazione/{idFlusso}':
    get:
      summary: Acquisizione di un flusso di rendicontazione
      operationId: getFlussoRendicontazione
      tags:
        - Rendicontazioni
      parameters:
        - in: path
          name: idFlusso
          description: Identificativo del flusso di rendicontazione
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Dettaglio della rendicontazione
          content:
            application/xml:
              schema:
                type: string
                example: xml del flusso di rendicontazione
            application/json:
              schema:
                $ref: '#/components/schemas/FlussoRendicontazione'
        '401':
          $ref: '#/components/responses/401NotAuthenticated'
        '403':
          $ref: '#/components/responses/403NotAuthorized'
        '404':
          $ref: '#/components/responses/404NotFound'
        '502':
          $ref: '#/components/responses/502BadGateway'
  '/riconciliazioni':
    get:
      summary: Elenco dei movimenti di cassa riconciliati
      operationId: findRiconciliazioni
      tags:
        - Riconciliazioni
      parameters:
        - $ref: '#/components/parameters/offset'
        - $ref: '#/components/parameters/limit'
        - $ref: '#/components/parameters/fields'
        - $ref: '#/components/parameters/sort'
        - $ref: '#/components/parameters/idDominio'
        - $ref: '#/components/parameters/dataDa'
        - $ref: '#/components/parameters/dataA'
      responses:
        '200':
          description: Dettaglio dell'incasso
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Riconciliazioni'
        '400':
          $ref: '#/components/responses/400BadRequest'
        '401':
          $ref: '#/components/responses/401NotAuthenticated'
        '403':
          $ref: '#/components/responses/403NotAuthorized'
        '500':
          $ref: '#/components/responses/503ServiceUnavailable'         
  '/riconciliazioni/{idDominio}':
    post:
      summary: Riconciliazione di un movimento di cassa
      operationId: addRiconciliazione
      tags:
        - Riconciliazioni
      parameters:
        - in: path
          name: idDominio
          description: Identificativo del creditore
          required: true
          schema:
            type: string           
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/NuovaRiconciliazione'
      responses:
        '201':
          description: Movimento riconciliato
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Riconciliazione'
        '400':
          $ref: '#/components/responses/400BadRequest'
        '401':
          $ref: '#/components/responses/401NotAuthenticated'
        '403':
          $ref: '#/components/responses/403NotAuthorized'
        '500':
          $ref: '#/components/responses/503ServiceUnavailable'          
  '/riconciliazioni/{idDominio}/{idIncasso}':
    get:
      summary: Dettaglio di un movimento di cassa riconciliato
      operationId: getRiconciliazione
      tags:
        - Riconciliazioni
      parameters:
        - in: path
          name: idDominio
          description: Identificativo del creditore
          required: true
          schema:
            type: string      
        - in: path
          name: idIncasso
          description: Identificativo dell'idFlusso o iuv, a seconda della modalita di riversamento
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Dettaglio dell'incasso
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Riconciliazione'
        '401':
          $ref: '#/components/responses/401NotAuthenticated'
        '403':
          $ref: '#/components/responses/403NotAuthorized'
        '404':
          $ref: '#/components/responses/404NotFound'
        '500':
          $ref: '#/components/responses/503ServiceUnavailable'        
  '/riscossioni':
    get:
      summary: Elenco degli importi riscossi o stornati
      operationId: findRiscossioni
      tags:
        - Riscossioni
      parameters:
        - $ref: '#/components/parameters/offset'
        - $ref: '#/components/parameters/limit'
        - $ref: '#/components/parameters/fields'
        - $ref: '#/components/parameters/sort'
        - $ref: '#/components/parameters/idDominio'
        - $ref: '#/components/parameters/dataDa'
        - $ref: '#/components/parameters/dataA'   
        - $ref: '#/components/parameters/tipoRiscossione'   
      responses:
        '201':
          description: Dettaglio della riscossione
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Riscossioni'
        '400':
          $ref: '#/components/responses/400BadRequest'                  
        '401':
          $ref: '#/components/responses/401NotAuthenticated'
        '403':
          $ref: '#/components/responses/403NotAuthorized'
        '503':
          $ref: '#/components/responses/503ServiceUnavailable'        
  '/riscossioni/{idDominio}/{iuv}/{iur}/{indice}':
    get:
      summary: Dettaglio di una riscossione
      operationId: getRiscossione
      tags:
        - Riscossioni
      parameters:
        - in: path
          name: idDominio
          description: Codice fiscale del dominio beneficiario
          required: true
          schema:
            type: string
        - in: path
          name: iuv
          description: Identificativo univoco di versamento
          required: true
          schema:
            type: string
        - in: path
          name: iur
          description: Identificativo univoco di riscossione
          required: true
          schema:
            type: string
        - in: path
          name: indice
          description: Identificativo univoco di riscossione
          required: true
          schema:
            type: integer
            minimum: 1
            maximum: 5
      responses:
        '200':
          description: Dettaglio della riscossione
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Riscossione'
        '401':
          $ref: '#/components/responses/401NotAuthenticated'
        '403':
          $ref: '#/components/responses/403NotAuthorized'
        '404':
          $ref: '#/components/responses/400BadRequest'
        '503':
          $ref: '#/components/responses/503ServiceUnavailable'          
  '/profilo':
    get:
      summary: Elenco delle acl associate all'utenza chiamante
      tags:
        - Utenti
      operationId: getProfilo
      responses:
        '200':
          description: Autorizzazioni dell'utenza chiamante
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Profilo'
        '401':
          $ref: '#/components/responses/401NotAuthenticated'
        '503':
          $ref: '#/components/responses/503ServiceUnavailable'   
components:
  securitySchemes:
    basicAuth:
      type: http
      scheme: basic
  parameters:
    # Generic parameters for pagination defined in
    idDominio:
      name: idDominio
      in: query
      description: Identificativo del dominio dell'ente
      required: false
      schema:
        type: string
    iuv:
      name: iuv
      in: query
      description: Identificativo del versamento
      required: false
      schema:
        type: string
    ccp:
      name: ccp
      in: query
      description: Codice contesto pagamento
      required: false
      schema:
        type: string        
    idA2A:
      name: idA2A
      in: query
      description: Identificativo del gestionale ente
      required: false
      schema:
        type: string
    idPendenza:
      name: idPendenza
      in: query
      description: Identificativo della pendenza nel gestionale ente
      required: false
      schema:
        type: string        
    idPagatore:
      name: idPagatore
      in: query
      description: Identificativo del soggetto debitore della pendenza
      required: false
      schema:
        type: string
      example: 'RSSMRA30A01H501I'
    idVersante:
      name: idVersante
      in: query
      description: Identificativo del soggetto versante del pagamento
      required: false
      schema:
        type: string
      example: 'RSSMRA30A01H501I'      
    idPagamento:
      name: idSessionePortale
      in: query
      description: Identificativo della richiesta di pagamento
      required: false
      schema:
        type: string     
      example: 'c8be909b-2feb-4ffa-8f98-704462abbd1d'         
    idSessionePortale:
      name: idSessionePortale
      in: query
      description: Identificativo della sessione di pagamento assegnato dall'EC
      required: false
      schema:
        type: string     
      example: 'c8be909b-2feb-4ffa-8f98-704462abbd1d'   
    idSessionePsp:
      name: idSessionePsp
      in: query
      description: Identificativo della sessione di pagamento assegnato da pagoPA
      required: false
      schema:
        type: string
      example: 'c8be909b-2feb-4ffa-8f98-704462abbd1d'
    statoPendenza:
      name: statoPendenza
      in: query
      description: Filtro sullo stato del pendenza
      required: false
      schema:
        $ref: '#/components/schemas/StatoPendenza'
    esitoPagamento:
      name: statoPendenza
      in: query
      description: Filtro sullo stato del pendenza
      required: false
      schema:
        $ref: '#/components/schemas/EsitoRpp'            
    cursor:
      name: cursor
      in: query
      description: An opaque identifier that points to the next item in the collection.
      example: 01BX9NSMKVXXS5PSP2FATZM123
      schema:
        type: string
    fields:
      name: fields
      in: query
      description: Fields to retrieve
      required: false
      schema:
        type: string
    limit:
      name: limit
      in: query
      description: How many items to return at one time (max 100)
      required: false
      schema:
        $ref: '#/components/schemas/Limit'
    offset:
      name: offset
      in: query
      description: The zero-ary offset index into the results
      required: false
      schema:
        $ref: '#/components/schemas/Offset'
    q:
      name: q
      in: query
      description: Search query term
      schema:
        type: string
    sort:
      name: sort
      in: query
      description: Sorting order
      required: false
      schema:
        type: string
        example: +name
    dataDa:
      name: dataDa
      in: query
      description: Inizio finestra di osservazione
      required: false
      schema:
        type: string
        format: date
    dataA:
      name: dataA
      in: query
      description: Fine finestra di osservazione
      required: false
      schema:
        type: string
        format: date      
    tipoRiscossione:
      name: tipoRiscossione
      in: query
      description: Tipologia di riscossione
      required: false
      schema:
        $ref: '#/components/schemas/TipoRiscossione'     
    Etag:
      name: Etag
      description: |
        The RFC7232 ETag header field in a response provides the current entity-
        tag for the selected resource. An entity-tag is an opaque identifier for
        different versions of a resource over time, regardless whether multiple
        versions are valid at the same time. An entity-tag consists of an opaque
        quoted string, possibly prefixed by a weakness indicator.
      in: header
      example: W/"xy" "5" "7da7a728-f910-11e6-942a-68f728c1ba70"
      required: false
      schema:
        type: string
    IfMatch:
      name: If-Match
      description: |
        The RFC7232 If-Match header field in a request requires the server to
        only operate on the resource that matches at least one of the provided
        entity-tags. This allows clients express a precondition that prevent
        the method from being applied if there have been any changes to the
        resource.
      in: header
      required: false
      example: '"5" "7da7a728-f910-11e6-942a-68f728c1ba70"'
      schema:
        type: string
    IfNoneMatch:
      name: If-None-Match
      description: |
        The RFC7232 If-None-Match header field in a request requires the server
        to only operate on the resource if it does not match any of the provided
        entity-tags. If the provided entity-tag is `*`, it is required that the
        resource does not exist at all.
      in: header
      required: false
      example: '"7da7a728-f910-11e6-942a-68f728c1ba70" *'
      schema:
        type: string
    avvisaturaDigitale:
      in: query
      name: avvisaturaDigitale
      description: Indica se la pendenza deve essere avvisata digitalmente
      required: false
      schema:
        type: boolean
        default: false
    modalitaAvvisaturaDigitale:
      in: query
      name: modalitaAvvisaturaDigitale
      description: Modalita' di avvisatura scelta per le pendenza
      required: false
      schema:
        $ref: '#/components/schemas/ModalitaAvvisaturaDigitale'        
  headers:
    # Headers conform to http://zalando.github.io/restful-api-guidelines/index.html#132
    X-RateLimit-Limit:
      description: The number of allowed requests in the current period
      schema:
        type: integer
        format: int32
    X-RateLimit-Remaining:
      description: The number of remaining requests in the current period
      schema:
        type: integer
        format: int32
    X-RateLimit-Reset:
      description: The number of seconds left in the current period
      schema:
        type: integer
        format: int32
    Retry-After:
      description: Retry contacting the endpoint *at least* after seconds. See https://tools.ietf.org/html/rfc7231#section-7.1.3
      schema:
        type: integer
        format: int32
  responses:
    # Predefined error codes for this API
    400BadRequest:
      description: Bad Request
      content:
        application/problem+json:
          schema:
            $ref: '#/components/schemas/ProblemValidation'
          example:
            status: 400
            title: "Bad Request"          
            detail: "La richiesta non e' valida"
            type: "https://govpay.readthedocs.io/it/latest/integrazione/errori/400.html"            
            instance: "https://govpay.readthedocs.io/it/latest/integrazione/errori/400000.html"
            invalidParams:
              - name: numeroAvviso
                reason: must match "[0-9]18"
                value: 12345678901234567890
              - name: importo
                reason: may not be null
                value: (null)                
    401NotAuthenticated:
      description: Not Authenticated
      content:
        application/problem+json:
          schema:
            $ref: '#/components/schemas/Problem'        
          example:
            status: 401
            title: "Not Authenticated"          
            detail: "Le credenziali fornite non sono corrette"
            type: "https://govpay.readthedocs.io/it/latest/integrazione/errori/401.html"            
            instance: "https://govpay.readthedocs.io/it/latest/integrazione/errori/401001.html"              
    403NotAuthorized:
      description: Not Authorized
      content:
        application/problem+json:
          schema:
            $ref: '#/components/schemas/Problem'      
          example:
            status: 403
            title: "Not Authorized"          
            detail: "L'utente non e' autorizzato a visualizzare la pendenza richiesta."
            type: "https://govpay.readthedocs.io/it/latest/integrazione/errori/403.html"            
            instance: "https://govpay.readthedocs.io/it/latest/integrazione/errori/403001.html"                         
    404NotFound:
      description: Not Found
      content:
        application/problem+json:
          schema:
            $ref: '#/components/schemas/Problem'
          example:
            status: 404
            title: "Not Found"          
            detail: "La pendenza richiesta non esiste"
            type: "https://govpay.readthedocs.io/it/latest/integrazione/errori/404.html"            
            instance: "https://govpay.readthedocs.io/it/latest/integrazione/errori/404001.html"                   
    429TooManyRequests:
      description: Too many requests
      headers:
        X-RateLimit-Limit:
          $ref: '#/components/headers/X-RateLimit-Limit'
        X-RateLimit-Remaining:
          $ref: '#/components/headers/X-RateLimit-Remaining'
        X-RateLimit-Reset:
          $ref: '#/components/headers/X-RateLimit-Reset'
        Retry-After:
          $ref: '#/components/headers/Retry-After'
      content:
        application/problem+json:
          schema:
            $ref: '#/components/schemas/Problem'
    502BadGateway:
      description: Bad Gateway
      content:
        application/problem+json:
          schema:
            $ref: '#/components/schemas/ProblemGateway'               
          example:
            status: 502
            title: "Bad Gateway"          
            detail: "Richiesta di pagamento rifiutata da pagoPA"
            type: "https://govpay.readthedocs.io/it/latest/integrazione/errori/502.html"            
            instance: "https://govpay.readthedocs.io/it/latest/integrazione/errori/502001.html"
            faultBean:
              id: NodoDeiPagamentiSPC
              faultCode: PPT_SEMANTICA
              faultString: Errore semantico
              description: "Errore in Carrello [3991c062151c424a90d4ab6102d917fc] - RPT [ChiavePagamento [identificativoDominio=02315520920, identificativoUnivocoPagamento=080180000618061, codiceContestoPagamento=211220181436172006]]: I valori di IBAN indicati nei versamenti (IT02L1234512345123456789012) non fanno parte degli IBAN validi per la PA"
    503ServiceUnavailable:
      description: Service Unavailable
      content:
        application/problem+json:
          schema:
            $ref: '#/components/schemas/Problem'
          example:
            status: 503
            title: "Service Unavailable"          
            detail: "JDBC Exception: unable to get managed connection from pool"
            type: "https://govpay.readthedocs.io/it/latest/integrazione/errori/503.html"            
            instance: "https://govpay.readthedocs.io/it/latest/integrazione/errori/503001.html"  
    default:
      description: Unexpected error
      content:
        application/problem+json:
          schema:
            $ref: '#/components/schemas/Problem'
  schemas:
    Acl:
      type: object
      required:
        - servizi
        - autorizzazioni
      properties:
        ruolo:
          type: string
          description: ruolo a cui si applica l'acl
          example: Operatore
        principal:
          type: string
          description: principal a cui si applica l'acl
          example: user001
        servizi:
          $ref: "#/components/schemas/TipoServizio"
        autorizzazioni:
          $ref: "#/components/schemas/TipoAutorizzazione"  
    Allegato:
      type: object
      required:
        - tipo
        - testo
      properties:
        tipo:
          description: Tipologia di allegato
          type: string
          example: Marca da bollo
          enum:
            - Esito pagamento
            - Marca da bollo
        testo:
          type: object
          example: 
            marcaDaBollo:
            PSP:
              CodiceFiscale: 99999999999
              Denominazione: Banco di Ponzi S.p.A.
            IUBD: 5563448914138
            OraAcquisto: 2018-12-31T14:56:42+0200
            Importo: 10.01
            TipoBollo: 01
            ImprontaDocumento: ...
            Signature: ...
    DatiPagamento:
      type: object
      required:
        - ccp
        - causaleVersamento
        - datiSpecificiRiscossione
      properties:
        ccp: 
          type: string
          example: "281120181253443049"
        causaleVersamento: 
          type: string
          example: "/RFB/154340602921782/10.01/TXT/Pagamento servizi"
        datiSpecificiRiscossione: 
          type: string
          example: "9/SERVIZIO_1A"
        allegato: 
          $ref: '#/components/schemas/Allegato'
        rt:
          type: string
          description: URL per l'acquisizione della RT che ha determinato la riscossione
          example: /rpps/01234567890/RF23567483937849450550875/281120181253443049/rt
    DatiVoceRiscossa:
      type: object
      required:
        - idA2A
        - idPendenza
        - descrizionePendenza
        - idVocePendenza
        - descrizioneVocePendenza
      properties:
        idA2A:
          type: string
          description: Identificativo del gestionale responsabile della pendenza
          example: A2A-12345
        idPendenza:
          type: string
          description: Identificativo della pendenza nel gestionale responsabile
          example: abcdef12345
        descrizionePendenza:
          type: string
          description: Descrizione da inserire nell'avviso di pagamento
          example: 'Sanzione CdS n. abc00000'
          maxLength: 140     
        idVocePendenza:
          type: string
          description: Identificativo della voce di pedenza nel gestionale proprietario
          example: abcdef12345_1           
        descrizioneVocePendenza:
          type: string
          description: descrizione della voce di pagamento
          example: Sanzione CdS n. abc00000
          minLength: 1
          maxLength: 140                  
        datiAllegatiVocePendenza:
          type: object
          description: Dati applicativi allegati dal gestionale secondo un formato proprietario.
    Dominio:
      type: object
      required:
        - idDominio
        - ragioneSociale
      properties:
        idDominio:
          type: string
          description: Codice fiscale
          example: 01234567890
          minLength: 1
          maxLength: 35          
        ragioneSociale:
          type: string
          description: Ragione sociale
          example: Ufficio due
          minLength: 1
          maxLength: 70          
        indirizzo:
          type: string
          example: Piazza della Vittoria
          minLength: 1
          maxLength: 70
        civico:
          type: string
          example: 10/A
          minLength: 1
          maxLength: 16
        cap:
          type: string
          example: 00000
          minLength: 1
          maxLength: 16
        localita:
          type: string
          example: Roma
          minLength: 1
          maxLength: 35
        provincia:
          type: string
          example: Roma
          minLength: 1
          maxLength: 35
        nazione:
          type: string
          example: IT
          pattern: "[A-Z]{2,2}"
        email:
          type: string
          description: Posta elettronica ordinaria
          example:  peo@creditore.it  
          pattern: "[A-Za-z0-9_]+([\\-\\+\\.'][A-Za-z0-9_]+)*@[A-Za-z0-9_]+([\\-\\.][A-Za-z0-9_]+)*\\.[A-Za-z0-9_]+([\\-\\.][A-Za-z0-9_]+)*"          
        pec:
          type: string
          description: Posta elettronica certificata
          example:  peo@creditore.it  
          pattern: "[A-Za-z0-9_]+([\\-\\+\\.'][A-Za-z0-9_]+)*@[A-Za-z0-9_]+([\\-\\.][A-Za-z0-9_]+)*\\.[A-Za-z0-9_]+([\\-\\.][A-Za-z0-9_]+)*" 
        tel:
          type: string
          description: Numero di telefono dell'help desk di primo livello
          example: 021234567890  
        fax:
          type: string
          description: Numero di fax dell'help desk di primo livello
          example: 021234567890           
        web:
          type: string
          description: Url del sito web
          example: http://www.comune.it/
        gln:
          type: string
          description: Global location number del beneficiario
          example: 0011223344556
        cbill:
          type: string
          description: codice cbill del beneficiario
          example: 12345
        logo:
          type: string
          description: URL del logo
          example: http://.../domini/01234567890/logo
    EsitoRpp:
      example: Eseguito
      type: string
      enum:
        - In corso
        - Rifiutata
        - Eseguita
        - Non eseguita
        - Parzialmente eseguita
        - Decorsa
        - Parzialmente decorsa     
    FlussiRendicontazione:
      type: object
      allOf:
        - $ref: '#/components/schemas/Lista' 
        - type: object
          properties:
            items:
              type: array
              items: 
                $ref: '#/components/schemas/FlussoRendicontazioneIndex'                 
    FlussoRendicontazione:
      type: object
      allOf:
        - $ref: '#/components/schemas/FlussoRendicontazioneIndex'
        - type: object
          properties:
            rendicontazioni:
              type: array
              items:
                $ref: '#/components/schemas/Rendicontazione'              
    FlussoRendicontazioneIndex:
      type: object
      required:
        - idFlusso
        - dataFlusso
        - trn
        - dataRegolamento
        - idPsp
        - idDominio
        - numeroPagamenti
        - importoTotale
      properties:
        idFlusso:
          type: string
          description: identificativo del flusso di rendicontazione
          example: 2017-11-21GovPAYPsp1-10:27:27.903
        dataFlusso:
          type: string
          format: date
          description: Data di emissione del flusso
          example: '2020-12-31'
        trn:
          type: string
          description: Identificativo dell'operazione di riversamento assegnato dal psp debitore
          example: 'idriversamento12345'
        dataRegolamento:
          type: string
          format: date
          description: Data dell'operazione di riversamento fondi
          example: '2020-12-31'        
        idPsp:
          type: string
          description: Identificativo dell'istituto mittente
          example: 'ABI-12345' 
        bicRiversamento:
          type: string
          description: Codice Bic della banca che ha generato il riversamento
          example: 'BIC-12345' 
        idDominio:
          type: string
          description: Identificativo dominio destinatario
          example: '01234567890' 
        numeroPagamenti:
          type: number
          description: numero di pagamenti oggetto della rendicontazione
          example: 3
        importoTotale:
          type: number
          description: somma degli importi rendicontati
          format: double
          example: 100.01                
    Limit:     
      type: integer
      format: int32
      default: 25
      maximum: 100
      minimum: 0      
    Lista:
      type: object
      required:
        - limit
        - offset
      properties:
        limit:
          $ref: '#/components/schemas/Limit'
        offset:
          $ref: '#/components/schemas/Offset'
        total:
          description: Number of items matching the filter criteria
          type: integer
          format: int64
          minimum: 0  
        first:
          description: Relative link to first result page. Null if you are already on first page.
          type: string
        next:
          description: Relative link to next result page. Null if you are on last page.
          type: string 
        prev:
          description: Relative link to previous result page. Null if you are on first page.
          type: string   
        last:
          description: Relative link to last result page. Null if you are already on last page.
          type: string   
    ModalitaAvvisaturaDigitale:
      example: Batch
      type: string
      enum:
        - Batch
        - Immediata              
    NuovaRiconciliazione:
      type: object
      required:
        - causale
        - importo
      properties:
        causale:
          type: string
          description: Causale dell'operazione di riversamento dal PSP alla Banca Tesoriera (attributo AT-05, cfr. SEPA Credit Transfert Scheme Rulebook)
          example: /PUR/LGPE-RIVERSAMENTO/URI/2017-01-01ABI00000011234
        importo:
          description: Importo dell'SCT
          type: number
          format: double
          example: 100.01
        dataValuta:
          type: string
          format: date
          description: Data di valuta dell'incasso
          example: '2020-12-31'
        ibanAccredito:
          type: string
          description: Identificativo del conto di tesoreria su cui sono stati incassati i fondi
          example: IT60X0542811101000000123456
        idDispositivo:
          type: string
          description: Identificativo del dispositivo da cui sono stati acquisiti gli estremi del movimento bancario, es. l'identificativo flusso BT del giornale di cassa SIOPE+.
          example: GDC-20190108201901071030112#001#002
        idMovimento:
          type: string
          description: Identificativo del movimento bancario, es. il numero di documento.
          example: '0001226'
    Offset:
      type: integer
      format: int32
      default: 0
      minimum: 0         
    Problem:
      type: object
      properties:
        type:
          type: string
          format: uri
          description: |
            An absolute URI that identifies the problem type.  When dereferenced,
            it SHOULD provide human-readable documentation for the problem type
            (e.g., using HTML).
          default: 'about:blank'
          example: 'https://tools.ietf.org/html/rfc7231#section-6.6.4'
        title:
          type: string
          description: |
            A short, summary of the problem type. Written in english and readable
            for engineers (usually not suited for non technical stakeholders and
            not localized); example: Service Unavailable
        status:
          type: integer
          format: int32
          description: |
            The HTTP status code generated by the origin server for this occurrence
            of the problem.
          minimum: 100
          maximum: 600
          exclusiveMaximum: true
          example: 503
        detail:
          type: string
          description: |
            A human readable explanation specific to this occurrence of the
            problem.
          example: Connection to database timed out
        instance:
          type: string
          format: uri
          description: |
            An absolute URI that identifies the specific occurrence of the problem.
            It may or may not yield further information if dereferenced.
    ProblemGateway:
      type: object
      allOf:
      - $ref: '#/components/schemas/Problem'
      - type: object
        properties:
          faultBean:
            type: object
            description: Errore originale dal Nodo dei Pagamenti SPC, come definito in https://docs.italia.it/italia/pagopa/pagopa-specifichepagamenti-docs/it/bozza/_docs/Capitolo10.html#la-struttura-faultbean
            required:
              - id
              - faultCode
              - faultString
            properties:
              id:
                type: string
                description: Soggetto che emette l'errore.
              faultCode:
                type: string
                description: Codice di errore.
              faultString:
                type: string
                description: Specifica del codice di errore.
              description:
                type: string
                description: Descrizione aggiuntiva.
              serial:
                type: number
                description: Posizione dell’elemento nella lista a cui fa riferimento.   
    ProblemValidation:
      type: object
      allOf:
      - $ref: '#/components/schemas/Problem'
      - type: object
        properties:
          invalidParams:
            type: array
            items:
              type: object
              required:
                - name
                - reason
                - value
              properties:
                name:
                  type: string
                reason:
                  type: string
                value:
                  type: string                  
    Profilo:
      type: object
      required: 
        - nome
        - domini
        - entrate
        - acl
      properties:
        nome:
          type: string
          description: Nome o principal dell'utenza
        domini:
          type: array
          description: domini su cui e' abilitato ad operare
          items: 
            $ref: '#/components/schemas/Dominio'
        entrate:
          type: array
          description: entrate su cui e' abilitato ad operare
          items: 
            $ref: '#/components/schemas/TipoEntrata'
        acl:
          type: array
          items:
            $ref: '#/components/schemas/Acl'
        anagrafica:
          $ref: '#/components/schemas/Soggetto'
        identityData:
          type: object 
    Rendicontazione:
      type: object
      required:
        - iuv
        - iur
        - indice
        - importo
        - esito
        - data
      properties:
        iuv:
          type: string
          description: Identificativo univoco di versamento
          example: 'RF23567483937849450550875'
        iur:
          type: string
          description: Identificativo univoco di riscossione
          example: '1234acdc'
        indice:
          type: number
          description: Indice dell'occorrenza del pagamento all’interno della struttura datiSingoloPagamento della Ricevuta Telematica.
          example: 1          
        importo:
          type: number
          description: Importo rendicontato. 
          example: 10.01
        esito:
          type: number
          description: >
            Codice di esito dell'operazione rendicontata
             * 0 = Pagamento eseguito
             * 3 = Pagamento revocato
             * 9 = Pagamento eseguito in assenza di RPT
          example: 0
        data:
          type: string
          format: date
          description: Data di esito
          example: '2018-12-31'
        segnalazioni:
          type: array
          items:
            $ref: '#/components/schemas/Segnalazione'
        datiVoceRiscossa:
          $ref: '#/components/schemas/DatiVoceRiscossa'
        datiPagamento:
          $ref: '#/components/schemas/DatiPagamento'
    Riconciliazione:
      type: object
      allOf:
        - $ref: '#/components/schemas/RiconciliazioneIndex' 
        - type: object
          properties: 
            riscossioni:
              type: array
              items: 
                $ref: '#/components/schemas/RiscossioneIndex' 
    RiconciliazioneIndex:
      type: object
      allOf:
        - $ref: '#/components/schemas/NuovaRiconciliazione' 
        - type: object
          required:
            - idDominio
            - idRiconciliazione
          properties:
            idDominio:
              type: string
              description: Identificativo ente creditore
              example: 01234567890
            idRiconciliazione:
              type: string
              description: Identificativo della riconciliazione assegnato da GovPay
              example: '12345'
    Riconciliazioni:
      type: object
      allOf:
        - $ref: '#/components/schemas/Lista' 
        - type: object
          properties:
            items:
              type: array
              items: 
                $ref: '#/components/schemas/RiconciliazioneIndex'          
    Riscossione:
      type: object
      allOf:
        - $ref: '#/components/schemas/RiscossioneIndex'
        - type: object
          properties:
            rt:
              type: object
              description: "Rt inviata da PagoPa. {http://www.digitpa.gov.it/schemas/2011/Pagamenti/} ctRicevutaTelematica"  
              example:
                versioneOggetto: "6.2.0"
                dominio:
                  identificativoDominio: "01234567890"
                  identificativoStazioneRichiedente: "99999999999_02"
                identificativoMessaggioRicevuta: "bc88bcd7fc2e479d87ae0a1913d9c31c"
                dataOraMessaggioRicevuta: "2018-12-31T12:53:49"
                riferimentoMessaggioRichiesta: "bc88bcd7fc2e479d87ae0a1913d9c31c"
                riferimentoDataRichiesta: "2018-12-31"
                istitutoAttestante:
                  identificativoUnivocoAttestante:
                    tipoIdentificativoUnivoco: "A"
                    codiceIdentificativoUnivoco: "99999"
                  denominazioneAttestante: "Banco di Ponzi S.p.A."
                  codiceUnitOperAttestante: null    
                  denomUnitOperAttestante: null    
                  indirizzoAttestante: null    
                  civicoAttestante: null    
                  capAttestante: null    
                  localitaAttestante: null    
                  provinciaAttestante: null
                  nazioneAttestante: null
                enteBeneficiario:
                  identificativoUnivocoBeneficiario:
                    tipoIdentificativoUnivoco: "G"
                    codiceIdentificativoUnivoco: "01234567890"
                  denominazioneBeneficiario: "Ente Creditore"
                  codiceUnitOperBeneficiario: null
                  denomUnitOperBeneficiario: null
                  indirizzoBeneficiario: "Piazza della Vittoria"
                  civicoBeneficiario: "1A"
                  capBeneficiario: "00000"
                  localitaBeneficiario: "Roma"
                  provinciaBeneficiario: "RO"
                  nazioneBeneficiario: "IT"
                soggettoVersante:
                  identificativoUnivocoVersante: 
                    tipoIdentificativoUnivoco: "F"
                    codiceIdentificativoUnivoco: "BNCGLO30A01H501I"
                  anagraficaVersante: "Giulio Bianchi"
                  indirizzoVersante: null 
                  civicoVersante: null
                  capVersante: null
                  localitaVersante: null
                  provinciaVersante: null
                  nazioneVersante: null
                  e-mailVersante: null
                soggettoPagatore: 
                  identificativoUnivocoPagatore:
                    tipoIdentificativoUnivoco: "F"
                    codiceIdentificativoUnivoco: "RSSMRA30A01H501I"
                  anagraficaPagatore: "Mario Rossi"
                  indirizzoPagatore: "Piazza della Vittoria"
                  civicoPagatore: "10/A"
                  capPagatore: "00000"
                  localitaPagatore: "Roma"
                  provinciaPagatore: "Roma"
                  nazionePagatore: "IT"
                  e-mailPagatore: "mario.rossi@host.eu"
                datiPagamento:
                  codiceEsitoPagamento: "1"
                  importoTotalePagato: "0.00"
                  identificativoUnivocoVersamento: "154340602921782"
                  CodiceContestoPagamento: "281120181253443049"
                  datiSingoloPagamento:
                    - singoloImportoPagato: "0.00"
                      esitoSingoloPagamento: "Conto insufficiente"
                      dataEsitoSingoloPagamento: "2018-11-28"
                      identificativoUnivocoRiscossione: "n/a"
                      causaleVersamento: "/RFB/154340602921782/45.01/TXT/Pagamento servizi"
                      datiSpecificiRiscossione: "9/SERVIZIO_1A"
                      commissioniApplicatePSP: null
                      allegatoRicevuta: null    
    RiscossioneIndex:
      type: object
      required:
        - dominio
        - iuv
        - iur
        - indice
        - stato
        - tipo
        - importo
        - data
      properties:
        dominio:
          $ref: '#/components/schemas/Dominio'
        iuv:
          type: string
          description: Identificativo univoco di versamento
          example: RF23567483937849450550875
        iur:
          type: string
          description: Identificativo univoco di riscossione.
          example: '1234acdc'
        indice:
          type: number
          description: indice posizionale della voce pendenza riscossa
          example: 1
        stato:
          $ref: '#/components/schemas/StatoRiscossione'
        tipo:
          $ref: '#/components/schemas/TipoRiscossione'
        importo:
          type: number
          description: >-
            Importo riscosso. 
          example: 10.01
        data:
          type: string
          format: date
          description: Data di esecuzione della riscossione
          example: '2020-12-31'
        datiVoceRiscossa:
          $ref: '#/components/schemas/DatiVoceRiscossa'
        datiPagamento:
          $ref: '#/components/schemas/DatiPagamento'          
        riconciliazione:
          type: string
          description: Riferimento all'operazione di riconciliazione, se avvenuta
          example: "/riconciliazioni/01234567890/2017-01-01ABI00000011234"   
    Riscossioni:
      type: object
      allOf:
        - $ref: '#/components/schemas/Lista' 
        - type: object
          properties:
            items:
              type: array
              items: 
                $ref: '#/components/schemas/RiscossioneIndex'                                       
    Segnalazione:
      type: object
      required:
        - codice
        - descrizione
      properties:
        data:
          type: string
          format: date-time
          example: '2018-12-31T12:53:49'
        codice:
          type: string
          example: '0013'
        descrizione:
          type: string   
          example: 'Pagamento rendicontato senza RPT'
        dettaglio:
          type: string
          example: 'Acquisita rendicontazione senza RPT nel flusso ABC-1234-DEFG'             
    Soggetto:
      description: dati anagrafici di un versante o pagatore.
      type: object
      required:
        - tipo
        - identificativo
      properties:
        tipo:
          $ref: "#/components/schemas/TipoSoggetto"
        identificativo:
          description: codice fiscale o partita iva del soggetto
          type: string
          example: RSSMRA30A01H501I
          minLength: 1
          maxLength: 35
        anagrafica:
          description: nome e cognome o altra ragione sociale del soggetto
          type: string
          example: Mario Rossi
          minLength: 1
          maxLength: 70
        indirizzo:
          type: string
          example: Piazza della Vittoria
          minLength: 1
          maxLength: 70
        civico:
          type: string
          example: 10/A
          minLength: 1
          maxLength: 16
        cap:
          type: string
          example: 00000
          minLength: 1
          maxLength: 16
        localita:
          type: string
          example: Roma
          minLength: 1
          maxLength: 35
        provincia:
          type: string
          example: Roma
          minLength: 1
          maxLength: 35
        nazione:
          type: string
          example: IT
          pattern: "[A-Z]{2,2}"
        email:
          type: string
          example: mario.rossi@host.eu
          pattern: "[A-Za-z0-9_]+([\\-\\+\\.'][A-Za-z0-9_]+)*@[A-Za-z0-9_]+([\\-\\.][A-Za-z0-9_]+)*\\.[A-Za-z0-9_]+([\\-\\.][A-Za-z0-9_]+)*"
        cellulare:
          type: string
          example: +39 000 1234567    
          pattern: "\\+[0-9]{2,2}\\s[0-9]{3,3}\\-[0-9]{7,7}" 
    StatoPendenza:
      example: Pagata
      type: string
      enum:
        - Pagata
        - Non pagata
        - Parzialmente pagata
        - Annullata
        - Scaduta 
    StatoRiscossione:
      description: Stato della riscossione
      example: Riscossa
      type: string
      enum:
        - Riscossa
        - Riconciliata
    TipoAutorizzazione:
      type: array
      items:
        type: string
        enum:
         - Lettura
         - Scrittura
      example:
        - Lettura
        - Scrittura 
    TipoContabilita:
      description: Tipologia di codifica del capitolo di bilancio
      type: string
      enum:
        - CAPITOLO
        - SPECIALE
        - SIOPE
        - ALTRO
      example: SIOPE                            
    TipoEntrata:
      type: object
      required:
       - idEntrata
       - tipoContabilita
       - codiceContabilita
      properties:
        idEntrata:
          type: string
          example: IMU
        tipoContabilita:
          $ref: '#/components/schemas/TipoContabilita'
        codiceContabilita:
          description: Codifica del capitolo di bilancio
          type: string
          example: 3321
          minLength: 1
          maxLength: 135          
    TipoRiscossione:
      description: Tipologia della voce riscossa
      type: string
      enum:
        - Entrata
        - Marca da bollo telematica          
    TipoServizio:
      type: string
      enum:
        - Anagrafica PagoPA
        - Anagrafica Creditore
        - Anagrafica Applicazioni
        - Anagrafica Ruoli
        - Pagamenti
        - Pendenze
        - Rendicontazioni e Incassi
        - Giornale degli Eventi
        - Configurazione e manutenzione
      example:
        Pendenze e Pagamenti             
    TipoSoggetto:
      description: >-
        tipologia di soggetto, se persona fisica (F) o giuridica
        (G)
      type: string
      enum:
        - G
        - F
      example: F
