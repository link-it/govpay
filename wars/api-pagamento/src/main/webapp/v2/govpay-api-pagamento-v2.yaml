openapi: 3.0.0
info:
  version: "1.0.0"
  title: GovPay - API Pagamento
  contact:
    name: GitHub Project Page
    url: 'https://github.com/link-it/GovPay/'
  license:
    name: GPL
    url: 'https://github.com/link-it/GovPay/blob/master/LICENSE'
servers:
  - url: http://localhost/govpay/frontend/api/pagamento/rs/v1/
tags:
  - name: Pagamenti
    description: Avvio e consultazione dei pagamenti delle pendenze
  - name: Transazioni
    description: Consultazione delle transazioni di pagamento a pagoPA    
  - name: Pendenze
    description: Consultazione delle posizioni debitorie
  - name: Avvisi
    description: Consultazione degli avvisi di pagamento pagoPA    
  - name: Domini
    description: Anagrafica degli Enti Creditori    
  - name: Utenti
    description: Anagrafica degli Utenti
security:
  - basicAuth: []    
paths:
  '/pagamenti':
    post:
      operationId: addPagamento
      summary: Avvio di un pagamento di pendenze
      tags:
        - Pagamenti  
      description: >-
        L'operazione consente di avviare una sessione di pagamento per una o più
        pendenze. Le pendenze presenti in posizione debitoria possono essere
        riferite tramite identificativo della pendenza del gestionale proprietario 
        (_idA2A_ e _idPendenza_) oppure con gli estremi dell'avviso (_idDominio_ 
        e _iuv_). Nel caso invece di pendenze spontanee, è possibile
        fornire direttamente i dati costitutivi.
      parameters:
        - $ref: '#/components/parameters/idSessionePortale'
        - $ref: '#/components/parameters/avvisaturaDigitale'
        - $ref: '#/components/parameters/modalitaAvvisaturaDigitale'
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/NuovoPagamento'
      responses:
        '201':
          description: Pagamento creato
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PagamentoCreato'
        '400':
          $ref: '#/components/responses/400BadRequest'
        '401':
          $ref: '#/components/responses/401NotAuthenticated'
        '403':
          $ref: '#/components/responses/403NotAuthorized'
        '503':
          $ref: '#/components/responses/503ServiceUnavailable'
        '502':
          $ref: '#/components/responses/502BadGateway'
    get:
      summary: Lista dei pagamenti
      operationId: findPagamenti
      tags:
        - Pagamenti  
      parameters:
        - $ref: '#/components/parameters/offset'
        - $ref: '#/components/parameters/limit'
        - $ref: '#/components/parameters/fields'
        - $ref: '#/components/parameters/sort'
        - $ref: '#/components/parameters/idSessionePortale'
        - $ref: '#/components/parameters/idSessionePsp'
        - $ref: '#/components/parameters/idVersante'
        - $ref: '#/components/parameters/statoPagamento'
      responses:
        '200':
          description: Elenco dei pagamenti da portale
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Pagamenti'
        '400':
          $ref: '#/components/responses/400BadRequest'
        '401':
          $ref: '#/components/responses/401NotAuthenticated'
        '403':
          $ref: '#/components/responses/403NotAuthorized'
        '503':
          $ref: '#/components/responses/503ServiceUnavailable'
  '/pagamenti/{id}':
    get:
      summary: Dettaglio di un pagamento
      operationId: getPagamento
      tags:
        - Pagamenti
      parameters:
        - in: path
          name: id
          description: Identificativo del pagamento
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Dettaglio del pagamento
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Pagamento'
        '401':
          $ref: '#/components/responses/401NotAuthenticated'
        '403':
          $ref: '#/components/responses/403NotAuthorized'
        '404':
          $ref: '#/components/responses/404NotFound'
        '503':
          $ref: '#/components/responses/503ServiceUnavailable'      
  '/pagamenti/byIdSession/{idSession}':
    get:
      summary: Dettaglio di un pagamento
      operationId: getPagamentoByIdSession
      tags:
        - Pagamenti
      parameters:
        - in: path
          name: idSession
          description: Identificativo di sessione assegnato al pagamento da pagoPA
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Dettaglio del pagamento
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Pagamento'
        '401':
          $ref: '#/components/responses/401NotAuthenticated'
        '403':
          $ref: '#/components/responses/403NotAuthorized'
        '404':
          $ref: '#/components/responses/404NotFound'
        '503':
          $ref: '#/components/responses/503ServiceUnavailable'              
  '/pendenze':
    get:
      tags:
        - Pendenze
      summary: Elenco delle pendenze
      operationId: findPendenze
      description: Fornisce la lista delle pendenze filtrata ed ordinata.
      parameters:
        - $ref: '#/components/parameters/offset'
        - $ref: '#/components/parameters/limit'
        - $ref: '#/components/parameters/fields'
        - $ref: '#/components/parameters/sort'
        - $ref: '#/components/parameters/idDominio'
        - $ref: '#/components/parameters/iuv'
        - $ref: '#/components/parameters/idA2A'
        - $ref: '#/components/parameters/idPendenza'
        - $ref: '#/components/parameters/idDebitore'
        - $ref: '#/components/parameters/statoPendenza'
        - $ref: '#/components/parameters/idPagamento'
      responses:
        '200':
          description: Elenco delle pendenze che rispettano i filtri di ricerca
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Pendenze'
        '400':
          $ref: '#/components/responses/400BadRequest'                
        '401':
          $ref: '#/components/responses/401NotAuthenticated'
        '403':
          $ref: '#/components/responses/403NotAuthorized'
        '503':
          $ref: '#/components/responses/503ServiceUnavailable'      
  '/pendenze/{idA2A}/{idPendenza}':
    get:
      tags:
        - Pendenze
      summary: Dettaglio di una pendenza per identificativo
      operationId: getPendenza
      description: Acquisisce il dettaglio di una pendenza, comprensivo dei dati di pagamento.
      parameters:
        - in: path
          name: idA2A
          description: Identificativo del gestionale
          required: true
          schema:
            type: string
        - in: path
          name: idPendenza
          description: Identificativo della pendenza
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Informazioni dettagliate della pendenza
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Pendenza'
        '401':
          $ref: '#/components/responses/401NotAuthenticated'
        '403':
          $ref: '#/components/responses/403NotAuthorized'
        '404':
          $ref: '#/components/responses/404NotFound'
        '503':
          $ref: '#/components/responses/503ServiceUnavailable'
  '/rpps':
    get:  
      summary: Lista delle richieste di pagamento pendenza
      operationId: findRpps
      tags:
        - Transazioni
      parameters:
        - $ref: '#/components/parameters/offset'
        - $ref: '#/components/parameters/limit'
        - $ref: '#/components/parameters/fields'
        - $ref: '#/components/parameters/sort'
        - $ref: '#/components/parameters/idDominio'
        - $ref: '#/components/parameters/iuv'
        - $ref: '#/components/parameters/ccp'
        - $ref: '#/components/parameters/idA2A'
        - $ref: '#/components/parameters/idPendenza'
        - $ref: '#/components/parameters/idDebitore'
        - $ref: '#/components/parameters/esitoPagamento'
        - $ref: '#/components/parameters/idPagamento'
      responses:
        '200':
          description: Lista delle richieste di pagamento pendenza che rispettano i criteri di ricerca
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Rpps'
        '400':
          $ref: '#/components/responses/400BadRequest'                
        '401':
          $ref: '#/components/responses/401NotAuthenticated'
        '403':
          $ref: '#/components/responses/403NotAuthorized'
        '503':
          $ref: '#/components/responses/503ServiceUnavailable'
  '/rpps/{idDominio}/{iuv}/{ccp}':
    get:
      summary: Dettaglio di una richiesta di pagamento pendenza
      operationId: getRpp
      tags:
        - Transazioni
      parameters:
        - in: path
          name: idDominio
          description: Codice fiscale del dominio beneficiario
          required: true
          schema:
            type: string
        - in: path
          name: iuv
          description: Identificativo univoco di versamento
          required: true
          schema:
            type: string
        - in: path
          name: ccp
          description: Codice di contesto pagamento
          required: true
          schema:
            type: string
      responses:
        '201':
          description: Dettaglio della richiesta di pagamento
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Rpp'          
        '401':
          $ref: '#/components/responses/401NotAuthenticated'
        '403':
          $ref: '#/components/responses/403NotAuthorized'
        '404':
          $ref: '#/components/responses/404NotFound'
        '503':
          $ref: '#/components/responses/503ServiceUnavailable'           
  '/rpps/{idDominio}/{iuv}/{ccp}/rpt':
    get:
      summary: Acquisizione della richiesta di pagamento pagopa
      operationId: getRpt
      tags:
        - Transazioni
      parameters:
        - in: path
          name: idDominio
          description: Codice fiscale del dominio beneficiario
          required: true
          schema:
            type: string
        - in: path
          name: iuv
          description: Identificativo univoco di versamento
          required: true
          schema:
            type: string
        - in: path
          name: ccp
          description: Codice di contesto pagamento
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Richiesta di pagamento
          content:
            application/xml:
              schema:
                type: object
                example: xml della richiesta di pagamento pagopa
            application/json:
              schema:
                type: object
                example: conversione json della richiesta di pagamento pagopa
        '401':
          $ref: '#/components/responses/401NotAuthenticated'
        '403':
          $ref: '#/components/responses/403NotAuthorized'
        '404':
          $ref: '#/components/responses/404NotFound'
        '503':
          $ref: '#/components/responses/503ServiceUnavailable'                    
  '/rpps/{idDominio}/{iuv}/{ccp}/rt':
    get:
      operationId: getRt
      summary: Acquisizione della ricevuta di pagamento
      tags:
        - Transazioni
      parameters:
        - in: path
          name: idDominio
          description: Codice fiscale del dominio beneficiario
          required: true
          schema:
            type: string
        - in: path
          name: iuv
          description: Identificativo univoco di versamento
          required: true
          schema:
            type: string
        - in: path
          name: ccp
          description: Codice di contesto pagamento
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Ricevuta di pagamento
          content:
            application/pdf:
              schema:
                type: string
                format: binary
                example: stampa della ricevuta
            application/xml:
              schema:
                type: object
                example: xml della ricevuta
            application/json:
              schema:
                type: object
                example: conversione json della ricevuta
        '401':
          $ref: '#/components/responses/401NotAuthenticated'
        '403':
          $ref: '#/components/responses/403NotAuthorized'
        '404':
          $ref: '#/components/responses/404NotFound'
        '503':
          $ref: '#/components/responses/503ServiceUnavailable'             
  '/avvisi/{idDominio}/{numeroAvviso}':
    get:
      tags:
        - Avvisi
      summary: Avviso di pagamento
      operationId: getAvviso
      description: Fornisce un avviso di pagamento o la pendenza ad esso associata
      parameters:
        - in: path
          name: idDominio
          description: Identificativo del dominio dell'ente
          required: true
          schema:
            type: string
        - in: path
          name: numeroAvviso
          description: Identificativo dell'avviso di pagamento pagoPA
          required: true
          schema:
            type: string
        - $ref: '#/components/parameters/idDebitore'            
      responses:
        '200':
          description: Avviso di pagamento
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Avviso'
            application/pdf:
              schema:
                type: string
                format: binary
        '401':
          $ref: '#/components/responses/401NotAuthenticated'
        '403':
          $ref: '#/components/responses/403NotAuthorized'
        '404':
          $ref: '#/components/responses/404NotFound'
        '503':
          $ref: '#/components/responses/503ServiceUnavailable'
  '/domini':
    get:
      summary: Lista dei domini
      tags:
        - Domini 
      operationId: findDomini
      parameters:
        - $ref: '#/components/parameters/offset'
        - $ref: '#/components/parameters/limit'
        - $ref: '#/components/parameters/fields'
        - $ref: '#/components/parameters/sort'
      responses:
        '200':
          description: Elenco dei domini
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Domini'          
  '/domini/{idDominio}/logo':
    get:
      summary: Lettura del logo di un dominio
      tags:
        - Domini 
      operationId: getLogo
      parameters:
        - in: path
          name: idDominio
          description: Codice fiscale del dominio beneficiario
          required: true
          schema:
            type: string      
      responses:
        '200':
          description: Logo dell'ente
          content:
            image/svg+xml:
              schema:
                type: string
 
  '/profilo':
    get:
      summary: Elenco delle acl associate all'utenza chiamante
      tags:
        - Utenti
      operationId: getProfilo
      responses:
        '200':
          description: Autorizzazioni dell'utenza chiamante
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Profilo'
        '401':
          $ref: '#/components/responses/401NotAuthenticated'
        '503':
          $ref: '#/components/responses/503ServiceUnavailable'   
components:
  parameters:
    # Generic parameters for pagination defined in
    idDominio:
      name: idDominio
      in: query
      description: Identificativo del dominio dell'ente
      required: false
      schema:
        type: string
    iuv:
      name: iuv
      in: query
      description: Identificativo del versamento
      required: false
      schema:
        type: string
    ccp:
      name: ccp
      in: query
      description: Codice contesto pagamento
      required: false
      schema:
        type: string        
    idA2A:
      name: idA2A
      in: query
      description: Identificativo del gestionale ente
      required: false
      schema:
        type: string
    idPendenza:
      name: idPendenza
      in: query
      description: Identificativo della pendenza nel gestionale ente
      required: false
      schema:
        type: string        
    idDebitore:
      name: idDebitore
      in: query
      description: Identificativo del soggetto debitore della pendenza
      required: false
      schema:
        type: string
      example: 'RSSMRA30A01H501I'
    idVersante:
      name: idDebitore
      in: query
      description: Identificativo del soggetto versante del pagamento
      required: false
      schema:
        type: string
      example: 'RSSMRA30A01H501I'      
    idPagamento:
      name: idSessionePortale
      in: query
      description: Identificativo della richiesta di pagamento
      required: false
      schema:
        type: string     
      example: 'c8be909b-2feb-4ffa-8f98-704462abbd1d'         
    idSessionePortale:
      name: idSessionePortale
      in: query
      description: Identificativo della sessione di pagamento assegnato dall'EC
      required: false
      schema:
        type: string     
      example: 'c8be909b-2feb-4ffa-8f98-704462abbd1d'   
    idSessionePsp:
      name: idSessionePsp
      in: query
      description: Identificativo della sessione di pagamento assegnato da pagoPA
      required: false
      schema:
        type: string
      example: 'c8be909b-2feb-4ffa-8f98-704462abbd1d'
    statoPagamento:
      name: statoPagamento
      in: query
      description: Filtro sullo stato del pagamento
      required: false
      schema:
        $ref: '#/components/schemas/StatoPagamento'
    statoPendenza:
      name: statoPendenza
      in: query
      description: Filtro sullo stato del pendenza
      required: false
      schema:
        $ref: '#/components/schemas/StatoPendenza'
    esitoPagamento:
      name: statoPendenza
      in: query
      description: Filtro sullo stato del pendenza
      required: false
      schema:
        $ref: '#/components/schemas/EsitoRpp'            
    cursor:
      name: cursor
      in: query
      description: An opaque identifier that points to the next item in the collection.
      example: 01BX9NSMKVXXS5PSP2FATZM123
      schema:
        type: string
    fields:
      name: fields
      in: query
      description: Fields to retrieve
      required: false
      schema:
        type: string
    limit:
      name: limit
      in: query
      description: How many items to return at one time (max 100)
      required: false
      schema:
        $ref: '#/components/schemas/Limit'
    offset:
      name: offset
      in: query
      description: The zero-ary offset index into the results
      required: false
      schema:
        $ref: '#/components/schemas/Offset'
    q:
      name: q
      in: query
      description: Search query term
      schema:
        type: string
    sort:
      name: sort
      in: query
      description: Sorting order
      required: false
      schema:
        type: string
        example: +name
    Etag:
      name: Etag
      description: |
        The RFC7232 ETag header field in a response provides the current entity-
        tag for the selected resource. An entity-tag is an opaque identifier for
        different versions of a resource over time, regardless whether multiple
        versions are valid at the same time. An entity-tag consists of an opaque
        quoted string, possibly prefixed by a weakness indicator.
      in: header
      example: W/"xy" "5" "7da7a728-f910-11e6-942a-68f728c1ba70"
      required: false
      schema:
        type: string
    IfMatch:
      name: If-Match
      description: |
        The RFC7232 If-Match header field in a request requires the server to
        only operate on the resource that matches at least one of the provided
        entity-tags. This allows clients express a precondition that prevent
        the method from being applied if there have been any changes to the
        resource.
      in: header
      required: false
      example: '"5" "7da7a728-f910-11e6-942a-68f728c1ba70"'
      schema:
        type: string
    IfNoneMatch:
      name: If-None-Match
      description: |
        The RFC7232 If-None-Match header field in a request requires the server
        to only operate on the resource if it does not match any of the provided
        entity-tags. If the provided entity-tag is `*`, it is required that the
        resource does not exist at all.
      in: header
      required: false
      example: '"7da7a728-f910-11e6-942a-68f728c1ba70" *'
      schema:
        type: string
    avvisaturaDigitale:
      in: query
      name: avvisaturaDigitale
      description: Indica se la pendenza deve essere avvisata digitalmente
      required: false
      schema:
        type: boolean
        default: false
    modalitaAvvisaturaDigitale:
      in: query
      name: modalitaAvvisaturaDigitale
      description: Modalita' di avvisatura scelta per le pendenza
      required: false
      schema:
        $ref: '#/components/schemas/ModalitaAvvisaturaDigitale'        
  headers:
    # Headers conform to http://zalando.github.io/restful-api-guidelines/index.html#132
    X-RateLimit-Limit:
      description: The number of allowed requests in the current period
      schema:
        type: integer
        format: int32
    X-RateLimit-Remaining:
      description: The number of remaining requests in the current period
      schema:
        type: integer
        format: int32
    X-RateLimit-Reset:
      description: The number of seconds left in the current period
      schema:
        type: integer
        format: int32
    Retry-After:
      description: Retry contacting the endpoint *at least* after seconds. See https://tools.ietf.org/html/rfc7231#section-7.1.3
      schema:
        type: integer
        format: int32
  responses:
    # Predefined error codes for this API
    400BadRequest:
      description: Bad Request
      content:
        application/problem+json:
          schema:
            type: object
            allOf:
            - $ref: '#/components/schemas/Problem'
            - type: object
              properties:
                invalidParams:
                type: array
                items:
                  type: object
                  required:
                    - name
                    - reason
                    - value
                  properties:
                    name:
                      type: string
                    reason:
                      type: string
                    value:
                      type: string
          example:
            status: 400
            title: "Bad Request"          
            detail: "La richiesta non e' valida"
            type: "https://govpay.readthedocs.io/it/latest/integrazione/errori/400.html"            
            instance: "https://govpay.readthedocs.io/it/latest/integrazione/errori/400000.html"
            invalidParams:
              - name: numeroAvviso
                reason: must match "[0-9]18"
                value: 12345678901234567890
              - name: importo
                reason: may not be null
                value: (null)                
    401NotAuthenticated:
      description: Not Authenticated
      content:
        application/problem+json:
          schema:
            $ref: '#/components/schemas/Problem'        
          example:
            status: 401
            title: "Not Authenticated"          
            detail: "Le credenziali fornite non sono corrette"
            type: "https://govpay.readthedocs.io/it/latest/integrazione/errori/401.html"            
            instance: "https://govpay.readthedocs.io/it/latest/integrazione/errori/401001.html"              
    403NotAuthorized:
      description: Not Authorized
      content:
        application/problem+json:
          schema:
            $ref: '#/components/schemas/Problem'      
          example:
            status: 403
            title: "Not Authorized"          
            detail: "L'utente non e' autorizzato a visualizzare la pendenza richiesta."
            type: "https://govpay.readthedocs.io/it/latest/integrazione/errori/403.html"            
            instance: "https://govpay.readthedocs.io/it/latest/integrazione/errori/403001.html"                         
    404NotFound:
      description: Not Found
      content:
        application/problem+json:
          schema:
            $ref: '#/components/schemas/Problem'
          example:
            status: 404
            title: "Not Found"          
            detail: "La pendenza richiesta non esiste"
            type: "https://govpay.readthedocs.io/it/latest/integrazione/errori/404.html"            
            instance: "https://govpay.readthedocs.io/it/latest/integrazione/errori/404001.html"                   
    429TooManyRequests:
      description: Too many requests
      headers:
        X-RateLimit-Limit:
          $ref: '#/components/headers/X-RateLimit-Limit'
        X-RateLimit-Remaining:
          $ref: '#/components/headers/X-RateLimit-Remaining'
        X-RateLimit-Reset:
          $ref: '#/components/headers/X-RateLimit-Reset'
        Retry-After:
          $ref: '#/components/headers/Retry-After'
      content:
        application/problem+json:
          schema:
            $ref: '#/components/schemas/Problem'
    502BadGateway:
      description: Bad Gateway
      content:
        application/problem+json:
          schema:
            type: object
            allOf:
            - $ref: '#/components/schemas/Problem'
            - type: object
              properties:
                faultBean:
                  type: object
                  description: Errore originale dal Nodo dei Pagamenti SPC, come definito in https://docs.italia.it/italia/pagopa/pagopa-specifichepagamenti-docs/it/bozza/_docs/Capitolo10.html#la-struttura-faultbean
                  required:
                    - id
                    - faultCode
                    - faultString
                  properties:
                    id:
                      type: string
                      description: Soggetto che emette l'errore.
                    faultCode:
                      type: string
                      description: Codice di errore.
                    faultString:
                      type: string
                      description: Specifica del codice di errore.
                    description:
                      type: string
                      description: Descrizione aggiuntiva.
                    serial:
                      type: number
                      description: Posizione dell’elemento nella lista a cui fa riferimento.                  
          example:
            status: 502
            title: "Bad Gateway"          
            detail: "Richiesta di pagamento rifiutata da pagoPA"
            type: "https://govpay.readthedocs.io/it/latest/integrazione/errori/502.html"            
            instance: "https://govpay.readthedocs.io/it/latest/integrazione/errori/502001.html"
            faultBean:
              id: NodoDeiPagamentiSPC
              faultCode: PPT_SEMANTICA
              faultString: Errore semantico
              description: "Errore in Carrello [3991c062151c424a90d4ab6102d917fc] - RPT [ChiavePagamento [identificativoDominio=02315520920, identificativoUnivocoPagamento=080180000618061, codiceContestoPagamento=211220181436172006]]: I valori di IBAN indicati nei versamenti (IT02L1234512345123456789012) non fanno parte degli IBAN validi per la PA"
    503ServiceUnavailable:
      description: Service Unavailable
      content:
        application/problem+json:
          schema:
            $ref: '#/components/schemas/Problem'
          example:
            status: 503
            title: "Service Unavailable"          
            detail: "JDBC Exception: unable to get managed connection from pool"
            type: "https://govpay.readthedocs.io/it/latest/integrazione/errori/503.html"            
            instance: "https://govpay.readthedocs.io/it/latest/integrazione/errori/503001.html"  
    default:
      description: Unexpected error
      content:
        application/problem+json:
          schema:
            $ref: '#/components/schemas/Problem'
  schemas:
    Acl:
      type: object
      required:
        - servizi
        - autorizzazioni
      properties:
        ruolo:
          type: string
          description: ruolo a cui si applica l'acl
          example: Operatore
        principal:
          type: string
          description: principal a cui si applica l'acl
          example: user001
        servizi:
          $ref: "#/components/schemas/TipoServizio"
        autorizzazioni:
          $ref: "#/components/schemas/TipoAutorizzazione"  
    Avviso:
      type: object
      required:
        - stato
        - importo
        - dominio
        - numeroAvviso
        - dataValidita
        - descrizione
        - tassonomia
        - qrcode
        - barcode
      properties:
        stato:
          $ref: "#/components/schemas/StatoAvviso"
        importo:
          type: number
          description: Importo della pendenza associata all'avviso.
          example: 10.01
        debitore:
          $ref: '#/components/schemas/Soggetto'
        dominio:
          $ref: "#/components/schemas/Dominio"
        numeroAvviso:
          type: string
          description: Numero identificativo dell'avviso di pagamento
          example: 00100000000000012
        dataValidita:
          type: string
          format: date
          description: Data di validita dei dati dell'avviso, decorsa la quale l'importo può subire variazioni.
          example: '2019-12-31'
        dataScadenza:
          type: string
          format: date
          description: Data di scadenza dell'avviso, decorsa la quale non è più pagabile.
          example: '2020-12-31'
        descrizione:
          type: string
          description: Descrizione dell'avviso di pagamento
          example: 'Sanzione CdS n. abc00000'
        tassonomia:
          $ref: '#/components/schemas/TassonomiaAvviso'
    Bollo:
      description: Definisce i dati di un bollo telematico
      type: object
      required:
        - tipoBollo
        - hashDocumento
        - provinciaResidenza
      properties:
        tipoBollo:
          description: Tipologia di Bollo digitale
          type: string
          enum:
            - Imposta di bollo
        hashDocumento:
          description: Digest in base64 del documento informatico associato alla marca da bollo
          type: string
          example: "--- base64 ---"
          maxLength: 70
        provinciaResidenza:
          description: Sigla automobilistica della provincia di residenza del soggetto pagatore
          type: string         
          example: "RO"
          pattern: "[A-Z]{2,2}"        
    Conto:
      type: object
      required:
        - iban
      properties:
        iban:
          type: string
          example: IT60X0542811101000000123456
          pattern: "[a-zA-Z]{2,2}[0-9]{2,2}[a-zA-Z0-9]{1,30}" 
        bic:
          type: string
          example: DABAIE2D
          pattern: "[A-Z]{6,6}[A-Z2-9][A-NP-Z0-9]([A-Z0-9]{3,3}){0,1}"  
    Domini:
      type: object
      allOf:
        - $ref: '#/components/schemas/Lista' 
        - type: object
          properties:
            items:
              type: array
              items: 
                $ref: '#/components/schemas/Dominio'                      
    Dominio:
      type: object
      required:
        - idDominio
        - ragioneSociale
      properties:
        idDominio:
          type: string
          description: Codice fiscale
          example: 01234567890
          minLength: 1
          maxLength: 35          
        ragioneSociale:
          type: string
          description: Ragione sociale
          example: Ufficio due
          minLength: 1
          maxLength: 70          
        indirizzo:
          type: string
          example: Piazza della Vittoria
          minLength: 1
          maxLength: 70
        civico:
          type: string
          example: 10/A
          minLength: 1
          maxLength: 16
        cap:
          type: string
          example: 00000
          minLength: 1
          maxLength: 16
        localita:
          type: string
          example: Roma
          minLength: 1
          maxLength: 35
        provincia:
          type: string
          example: Roma
          minLength: 1
          maxLength: 35
        nazione:
          type: string
          example: IT
          pattern: "[A-Z]{2,2}"
        email:
          type: string
          description: Posta elettronica ordinaria
          example:  peo@creditore.it  
          pattern: "[A-Za-z0-9_]+([\\-\\+\\.'][A-Za-z0-9_]+)*@[A-Za-z0-9_]+([\\-\\.][A-Za-z0-9_]+)*\\.[A-Za-z0-9_]+([\\-\\.][A-Za-z0-9_]+)*"          
        pec:
          type: string
          description: Posta elettronica certificata
          example:  peo@creditore.it  
          pattern: "[A-Za-z0-9_]+([\\-\\+\\.'][A-Za-z0-9_]+)*@[A-Za-z0-9_]+([\\-\\.][A-Za-z0-9_]+)*\\.[A-Za-z0-9_]+([\\-\\.][A-Za-z0-9_]+)*" 
        tel:
          type: string
          description: Numero di telefono dell'help desk di primo livello
          example: 021234567890  
        fax:
          type: string
          description: Numero di fax dell'help desk di primo livello
          example: 021234567890           
        web:
          type: string
          description: Url del sito web
          example: http://www.comune.it/
        gln:
          type: string
          description: Global location number del beneficiario
          example: 0011223344556
        cbill:
          type: string
          description: codice cbill del beneficiario
          example: 12345
        logo:
          type: string
          description: URL del logo
          example: http://.../domini/01234567890/logo
    Entrata:
      description: Definisce i dettagli di una entrata.
      type: object
      required:
        - ibanAccredito
        - tipoContabilita
        - codiceContabilita
      properties:
        ibanAccredito:
          type: string
          example: IT60X0542811101000000123456
          pattern: "[a-zA-Z]{2,2}[0-9]{2,2}[a-zA-Z0-9]{1,30}"
        ibanAppoggio:
          type: string
          example: IT60X0542811101000000123456
          pattern: "[a-zA-Z]{2,2}[0-9]{2,2}[a-zA-Z0-9]{1,30}"
        tipoContabilita:
          $ref: '#/components/schemas/TipoContabilita'
        codiceContabilita:
          description: Codifica del capitolo di bilancio
          type: string
          example: 3321
          minLength: 1
          maxLength: 135
    EsitoRpp:
      example: Eseguito
      type: string
      enum:
        - In corso
        - Rifiutata
        - Eseguita
        - Non eseguita
        - Parzialmente eseguita
        - Decorsa
        - Parzialmente decorsa                   
    Limit:     
      type: integer
      format: int32
      default: 25
      maximum: 100
      minimum: 0      
    Lista:
      type: object
      required:
        - limit
        - offset
      properties:
        limit:
          $ref: '#/components/schemas/Limit'
        offset:
          $ref: '#/components/schemas/Offset'
        total:
          description: Number of items matching the filter criteria
          type: integer
          format: int64
          minimum: 0  
        first:
          description: Relative link to first result page. Null if you are already on first page.
          type: string
        next:
          description: Relative link to next result page. Null if you are on last page.
          type: string 
        prev:
          description: Relative link to previous result page. Null if you are on first page.
          type: string   
        last:
          description: Relative link to last result page. Null if you are already on last page.
          type: string   
    ModalitaAvvisaturaDigitale:
      example: Batch
      type: string
      enum:
        - Batch
        - Immediata              
    NuovaPendenza:  
      type: object
      allOf:
        - $ref: "#/components/schemas/RiferimentoPendenza"
        - type: object
          required:
            - idDominio
            - descrizione
            - soggettoPagatore
            - importo
            - voci
          properties:
            idDominio:
              type: string
              description: Identificativo del dominio creditore
              example: 1234567890
              minLength: 1
              maxLength: 35   
            idUnitaOperativa:
              type: string
              description: Identificativo dell'unita' operativa
              example: UO33132
              minLength: 1
              maxLength: 35   
            descrizione:
              type: string
              description: Descrizione della pendenza
              example: 'Sanzione CdS n. abc00000'
              maxLength: 140
            soggettoPagatore:
              $ref: '#/components/schemas/Soggetto'
            importo:
              type: number
              description: Importo della pendenza. Deve corrispondere alla somma delle singole voci.
              example: 10.01
              minimum: 0.00
              maximum: 99999999.99
            numeroAvviso:
              type: string
              description: Identificativo univoco versamento, assegnato se pagabile da psp
              example: 123456789012345678
              pattern: "[0-9]18"
            tassonomiaAvviso:
              $ref: '#/components/schemas/TassonomiaAvviso'  
            dataValidita:
              type: string
              format: date
              description: Data di validita dei dati della pendenza, decorsa la quale la pendenza può subire variazioni.
              example: '2019-12-31'
            dataScadenza:
              type: string
              format: date
              description: Data di scadenza della pendenza, decorsa la quale non è più pagabile.
              example: '2020-12-31'
            annoRiferimento:
              type: number
              description: Anno di riferimento della pendenza
              example: 2020
              pattern: "[0-9]4"
            cartellaPagamento:
              type: string
              description: Identificativo della cartella di pagamento a cui afferisce la pendenza
              example: ABC00000001
              minLength: 1
              maxLength: 35                            
            datiAllegati:
              type: object
              description: Dati applicativi allegati dal gestionale secondo un formato proprietario.   
            voci:
              type: array
              minItems: 1
              maxItems: 5
              items:
                $ref: '#/components/schemas/NuovaVocePendenza'         
    NuovaVocePendenza:
      type: object
      allOf:
        - $ref: "#/components/schemas/TipoRiferimentoVocePendenza"
        - type: object
          required:
            - idVocePendenza
            - importo
            - descrizione
          properties:
            idVocePendenza:
              type: string
              description: Identificativo della voce di pedenza nel gestionale proprietario
              example: abcdef12345_1
              minLength: 1
              maxLength: 35                 
            importo:
              type: number
              description: Importo della voce
              example: 10.01
              minimum: 0.00
              maximum: 99999999.99
            descrizione:
              type: string
              description: descrizione della voce di pagamento
              example: Sanzione CdS n. abc00000
              minLength: 1
              maxLength: 140                  
            datiAllegati:
              type: object
              description: Dati applicativi allegati dal gestionale secondo un formato proprietario.                       
    NuovoPagamento:   
      type: object
      allOf:
        - $ref: '#/components/schemas/NuovoPagamentoBase'  
        - type: object
          required:
            - pendenze
          properties:
            pendenze:
              type: array
              description: pendenze o riferimenti alle pendenze oggetto del pagamento
              minItems: 1
              items:
                anyOf:
                  - $ref: '#/components/schemas/RiferimentoPendenza'
                  - $ref: '#/components/schemas/RiferimentoAvviso'
                  - $ref: '#/components/schemas/NuovaPendenza'
    NuovoPagamentoBase:  
      type: object
      properties:
        urlRitorno:
          type: string
          description: >-
            url di ritorno al portale al termine della sessione di pagamento
          example: >-
            https://www.comune.it/pagamentopagopa/abcd-efgh-ijklm-12345
        contoAddebito:
          $ref: '#/components/schemas/Conto'
        dataEsecuzionePagamento:
          type: string
          format: date
          example: '2018-12-31'
          description: >-
            data in cui si richiede che venga effettuato il pagamento, se diversa dalla data corrente.
        credenzialiPagatore:
          type: string
          description: >-
            Eventuali credenziali richieste dal PSP necessarie per
            completare l'operazione (ad esempio un codice bilaterale
            utilizzabile una sola volta).
        soggettoVersante:
          $ref: '#/components/schemas/Soggetto'
        autenticazioneSoggetto:
          $ref: '#/components/schemas/TipoAutenticazioneSoggetto'                
    Offset:
      type: integer
      format: int32
      default: 0
      minimum: 0         
    Pagamenti:
      type: object
      allOf:
        - $ref: '#/components/schemas/Lista' 
        - type: object
          properties:
            items:
              type: array
              items: 
                $ref: '#/components/schemas/PagamentoIndex' 
    Pagamento:
      type: object
      allOf:
        - $ref: '#/components/schemas/PagamentoBase'  
        - type: object
          required:
            - pendenze
          properties:
            rpps:
              type: array
              items:
                $ref: '#/components/schemas/RppIndex'   
            pendenze:
              type: array
              items:
                $ref: '#/components/schemas/PendenzaIndex'              
    PagamentoBase:
      type: object
      allOf:
        - $ref: '#/components/schemas/NuovoPagamentoBase'  
        - type: object
          required:
            - id
            - nome
            - stato
            - importo
          properties:
            id:
              type: string
              example: 'f9866575-e255-4d10-9845-57ba88bec136'
              description: Identificativo del pagamento assegnato da GovPay
            nome:
              type: string
              example: 'Immatricolazione AA 2017/2018 ed altre 3 pendenze'
              description: Identificativo del pagamento assegnato da GovPay
            stato:
              $ref: '#/components/schemas/StatoPagamento'
            importo:
              type: number
              description: >-
                Importo del pagamento. Corrisponde alla somma degli importi delle pendenze al momento della richiesta
            idSessionePsp:
              type: string
              example: '7f905970-cfe9-4ee5-a9a7-81fe14e7437e'
              description: Identificativo del pagamento assegnato dal psp utilizzato
            redirect:
              type: string
              example: 'https://www.agid.wisp.it/payment?sessionId=7f905970-cfe9-4ee5-a9a7-81fe14e7437e'
              description: Url di redirect al psp inviata al versante per perfezionare il pagamento, se previsto dal modello                                         
    PagamentoCreato:
      type: object
      required:
        - id
        - href
        - redirect
        - idCarrelloRpt
        - idSessionePsp
      properties:
        id:
          type: string
          description: identificativo del pagamento
          example: 12345
        href:
          type: string
          description: Url del dettaglio del pagamento
          example: /pagamenti/12345
        redirect:
          type: string
          description: url a cui redirigere il navigatore per proseguire nel pagamento.
          example: 'https://www.agid.wisp.it/payment?sessionId=7f905970-cfe9-4ee5-a9a7-81fe14e7437e'
        idCarrelloRpt:
          type: string
          description: identificativo del carrello di pagamento pagoPA
          example: abc12345-4567-8901-9296-qwerty12345a           
        idSessionePsp:
          type: string
          description: identificativo della sessione di pagamento assegnato da pagoPA
          example: abc12345-4567-8901-9296-qwerty12345a         
    PagamentoIndex:
      type: object
      allOf:
        - $ref: '#/components/schemas/PagamentoBase'  
        - type: object
          required:
            - href
            - pendenze
            - rpps
          properties:
            href:
              type: string
              description: URL del pagamento
              example: /pagamenti/f9866575-e255-4d10-9845-57ba88bec136
            pendenze:
              type: string
              description: URL della lista delle pendenze oggetto del pagamento
              example: /pendenze?idPagamento=f9866575-e255-4d10-9845-57ba88bec136
            rpps:
              type: string
              description: URL della lista delle richieste di pagamento attivate  
              example: /rpps?idPagamento=f9866575-e255-4d10-9845-57ba88bec136
    Pendenza:
      type: object
      allOf:
        - $ref: '#/components/schemas/PendenzaBase'   
        - type: object
          required:
            - rpps
            - pagamenti
          properties:
            voci:
              type: array
              minItems: 1
              maxItems: 5
              items:
                $ref: '#/components/schemas/VocePendenza' 
            rpps:
              type: array
              items:
                $ref: '#/components/schemas/RppIndex'   
            pagamenti:
              type: array
              items:
                $ref: '#/components/schemas/PagamentoIndex'         
    PendenzaBase:
      type: object
      required:
        - idA2A
        - idPendenza
        - dominio
        - stato
        - descrizione
        - soggettoPagatore
        - importo
        - dataCaricamento
        - voci
      properties:
        idA2A:
          type: string
          description: Identificativo del gestionale responsabile della pendenza
          example: A2A-12345
        idPendenza:
          type: string
          description: Identificativo della pendenza nel gestionale responsabile
          example: abcdef12345
        dominio:
          $ref: '#/components/schemas/Dominio'
        unitaOperativa:
          $ref: '#/components/schemas/UnitaOperativa'
        stato:
          $ref: '#/components/schemas/StatoPendenza'
        segnalazioni:
          type: array
          items: 
            $ref: '#/components/schemas/Segnalazione'     
        iuvAvviso:
          type: string
          description: Iuv avviso, assegnato se pagabile da psp
          example: "000000000012345"
        iuvPagamento:
          type: string
          description: Iuv dell'ultimo pagamento eseguito con successo 
          example: "000000000012345"
        dataPagamento:
          type: string
          format: date
          description: Data di pagamento della pendenza
          example: '2018-12-31'
        descrizione:
          type: string
          description: Descrizione da inserire nell'avviso di pagamento
          example: 'Sanzione CdS n. abc00000'
          maxLength: 140
        soggettoPagatore:
          $ref: '#/components/schemas/Soggetto'
        importo:
          type: number
          description: Importo della pendenza. Deve corrispondere alla somma delle singole voci.
          example: 10.01
          minimum: 0.00
          maximum: 99999999.99
        numeroAvviso:
          type: string
          description: Identificativo univoco versamento, assegnato se pagabile da psp
          example: 123456789012345678
          pattern: "[0-9]18"
        dataCaricamento:
          type: string
          format: date
          description: Data di emissione della pendenza
          example: '2010-12-31'
        dataValidita:
          type: string
          format: date
          description: Data di validita dei dati della pendenza, decorsa la quale la pendenza può subire variazioni.
          example: '2019-12-31'
        dataScadenza:
          type: string
          format: date
          description: Data di scadenza della pendenza, decorsa la quale non è più pagabile.
          example: '2020-12-31'
        annoRiferimento:
          type: number
          description: Anno di riferimento della pendenza
          example: 2020
        cartellaPagamento:
          type: string
          description: Identificativo della cartella di pagamento a cui afferisce la pendenza
          example: ABC00000001
        datiAllegati:
          type: object
          description: Dati applicativi allegati dal gestionale secondo un formato proprietario.          
        tassonomiaAvviso:
          $ref: '#/components/schemas/TassonomiaAvviso'      
    PendenzaIndex:
      type: object
      allOf:
        - $ref: '#/components/schemas/PendenzaBase'   
        - type: object
          required:
            - href
            - rpp
            - pagamenti
          properties:
            href: 
              type: string
              description: Url della pendenza
            rpps:
              type: string
              description: Url per l'elenco delle rpp emesse per la pendenza
            pagamenti:
              type: string
              description: Url per l'elenco dei pagamenti da portale comprensivi della pendenza          
    Pendenze:
      type: object
      allOf:
        - $ref: '#/components/schemas/Lista' 
        - type: object
          properties:
            items:
              type: array
              items: 
                $ref: '#/components/schemas/PendenzaIndex'                                           
    Problem:
      type: object
      properties:
        type:
          type: string
          format: uri
          description: |
            An absolute URI that identifies the problem type.  When dereferenced,
            it SHOULD provide human-readable documentation for the problem type
            (e.g., using HTML).
          default: 'about:blank'
          example: 'https://tools.ietf.org/html/rfc7231#section-6.6.4'
        title:
          type: string
          description: |
            A short, summary of the problem type. Written in english and readable
            for engineers (usually not suited for non technical stakeholders and
            not localized); example: Service Unavailable
        status:
          type: integer
          format: int32
          description: |
            The HTTP status code generated by the origin server for this occurrence
            of the problem.
          minimum: 100
          maximum: 600
          exclusiveMaximum: true
          example: 503
        detail:
          type: string
          description: |
            A human readable explanation specific to this occurrence of the
            problem.
          example: Connection to database timed out
        instance:
          type: string
          format: uri
          description: |
            An absolute URI that identifies the specific occurrence of the problem.
            It may or may not yield further information if dereferenced.
    Profilo:
      type: object
      required: 
        - nome
        - domini
        - entrate
        - acl
      properties:
        nome:
          type: string
          description: Nome o principal dell'utenza
        domini:
          type: array
          description: domini su cui e' abilitato ad operare
          items: 
            $ref: '#/components/schemas/Dominio'
        entrate:
          type: array
          description: entrate su cui e' abilitato ad operare
          items: 
            $ref: '#/components/schemas/TipoEntrata'
        acl:
          type: array
          items:
            $ref: '#/components/schemas/Acl'
        anagrafica:
          $ref: '#/components/schemas/Soggetto'
        identityData:
          type: object   
    RiferimentoAvviso:
      type: object
      required:
        - idDominio
        - numeroAvviso
      properties:
        idDominio:
          type: string
          description: Codice fiscale dell'ente creditore
          example: 01234567890
        numeroAvviso:
          type: string
          description: >-
            Numero avviso della pendenza, assegnato se
            pagabile da psp
          example: 123456789012345678
          pattern: "[0-9]18"
        idPagatore:
          type: string
          description: >- 
            Identificativo del soggetto debitore 
            della pendenza riferita dall'avviso
          example: 'RSSMRA30A01H501I'   
    RiferimentoEntrata:
      description: Definisce i dettagli di incasso tramite riferimento in anagrafica GovPay.
      type: object
      required:
        - codEntrata
      properties:
        codEntrata:
          type: string
          example: SRV-12345                     
    RiferimentoPendenza:
      type: object
      required:
        - idA2A
        - idPendenza
      properties:
        idA2A:
          type: string
          description: >-
            Identificativo del gestionale responsabile della
            pendenza
          example: A2A_12345
        idPendenza:
          type: string
          description: >-
            Identificativo della pendenza nel gestionale
            responsabile
          example: abcdef12345                   
    Rpp:
      type: object
      allOf:
        - $ref: '#/components/schemas/RppBase'
        - type: object
          required:
            - pendenza
          properties:
            pendenza:
              $ref: '#/components/schemas/PendenzaIndex'         
    RppBase:
      type: object
      required: 
        - stato
        - rpt
      properties:
        stato:
          type: string
          description: Stato della richiesta di pagamento sulla piattaforma PagoPA.
          example: RT_ACCETTATA_PA
        dettaglioStato:
          type: string
          description: >-
            Dettaglio fornito dal Nodo dei Pagamenti sullo stato della
            richiesta.
        segnalazioni:
          type: array
          items: 
            $ref: '#/components/schemas/Segnalazione'
        rpt:
          type: object
          description: "Rpt inviata a PagoPa. {http://www.digitpa.gov.it/schemas/2011/Pagamenti/} ctRichiestaPagamentoTelematico"
          example:
            versioneOggetto: "6.2.0"
            dominio:
              identificativoDominio: "01234567890"
              identificativoStazioneRichiedente: 9999999999_01
            identificativoMessaggioRichiesta: "bc88bcd7fc2e479d87ae0a1913d9c31c"
            dataOraMessaggioRichiesta: 2018-12-31T12:53:49
            autenticazioneSoggetto: "N/A"
            soggettoVersante:
              identificativoUnivocoVersante: 
                tipoIdentificativoUnivoco: "F"
                codiceIdentificativoUnivoco: "BNCGLO30A01H501I"
              anagraficaVersante: "Giulio Bianchi"
              indirizzoVersante: null 
              civicoVersante: null
              capVersante: null
              localitaVersante: null
              provinciaVersante: null
              nazioneVersante: null
              e-mailVersante: null
            soggettoPagatore: 
              identificativoUnivocoPagatore:
                tipoIdentificativoUnivoco: "F"
                codiceIdentificativoUnivoco: "RSSMRA30A01H501I"
              anagraficaPagatore: "Mario Rossi"
              indirizzoPagatore: "Piazza della Vittoria"
              civicoPagatore: "10/A"
              capPagatore: "00000"
              localitaPagatore: "Roma"
              provinciaPagatore: "Roma"
              nazionePagatore: "IT"
              e-mailPagatore: "mario.rossi@host.eu"
            enteBeneficiario:
              identificativoUnivocoBeneficiario:
                tipoIdentificativoUnivoco: "G"
                codiceIdentificativoUnivoco: "02315520920"
              denominazioneBeneficiario: "Ente Creditore"
              codiceUnitOperBeneficiario: null
              denomUnitOperBeneficiario: null
              indirizzoBeneficiario: "Piazza della Vittoria"
              civicoBeneficiario: "1A"
              capBeneficiario: "00000"
              localitaBeneficiario: "Roma"
              provinciaBeneficiario: "RO"
              nazioneBeneficiario: "IT"
            datiVersamento:
              dataEsecuzionePagamento: "2018-12-31"
              importoTotaleDaVersare: "45.01"
              tipoVersamento: "BBT"
              identificativoUnivocoVersamento: "154340602921782"
              codiceContestoPagamento: "281120181253443049"
              ibanAddebito: null
              bicAddebito: null
              firmaRicevuta: "0"
              datiSingoloVersamento:
                - importoSingoloVersamento: "45.01"
                  commissioneCaricoPA: null
                  ibanAccredito: "IT02L1234512345123456789012"
                  bicAccredito: null
                  ibanAppoggio: null
                  bicAppoggio: null
                  credenzialiPagatore: null
                  causaleVersamento: "/RFB/154340602921782/45.01/TXT/Pagamento servizi"
                  datiSpecificiRiscossione: "9/SERVIZIO_1A"
        rt:
          type: object
          description: "Rt inviata da PagoPa. {http://www.digitpa.gov.it/schemas/2011/Pagamenti/} ctRicevutaTelematica"  
          example:
            versioneOggetto: "6.2.0"
            dominio:
              identificativoDominio: "01234567890"
              identificativoStazioneRichiedente: "99999999999_02"
            identificativoMessaggioRicevuta: "bc88bcd7fc2e479d87ae0a1913d9c31c"
            dataOraMessaggioRicevuta: "2018-12-31T12:53:49"
            riferimentoMessaggioRichiesta: "bc88bcd7fc2e479d87ae0a1913d9c31c"
            riferimentoDataRichiesta: "2018-12-31"
            istitutoAttestante:
              identificativoUnivocoAttestante:
                tipoIdentificativoUnivoco: "A"
                codiceIdentificativoUnivoco: "99999"
              denominazioneAttestante: "Banco di Ponzi S.p.A."
              codiceUnitOperAttestante: null    
              denomUnitOperAttestante: null    
              indirizzoAttestante: null    
              civicoAttestante: null    
              capAttestante: null    
              localitaAttestante: null    
              provinciaAttestante: null
              nazioneAttestante: null
            enteBeneficiario:
              identificativoUnivocoBeneficiario:
                tipoIdentificativoUnivoco: "G"
                codiceIdentificativoUnivoco: "01234567890"
              denominazioneBeneficiario: "Ente Creditore"
              codiceUnitOperBeneficiario: null
              denomUnitOperBeneficiario: null
              indirizzoBeneficiario: "Piazza della Vittoria"
              civicoBeneficiario: "1A"
              capBeneficiario: "00000"
              localitaBeneficiario: "Roma"
              provinciaBeneficiario: "RO"
              nazioneBeneficiario: "IT"
            soggettoVersante:
              identificativoUnivocoVersante: 
                tipoIdentificativoUnivoco: "F"
                codiceIdentificativoUnivoco: "BNCGLO30A01H501I"
              anagraficaVersante: "Giulio Bianchi"
              indirizzoVersante: null 
              civicoVersante: null
              capVersante: null
              localitaVersante: null
              provinciaVersante: null
              nazioneVersante: null
              e-mailVersante: null
            soggettoPagatore: 
              identificativoUnivocoPagatore:
                tipoIdentificativoUnivoco: "F"
                codiceIdentificativoUnivoco: "RSSMRA30A01H501I"
              anagraficaPagatore: "Mario Rossi"
              indirizzoPagatore: "Piazza della Vittoria"
              civicoPagatore: "10/A"
              capPagatore: "00000"
              localitaPagatore: "Roma"
              provinciaPagatore: "Roma"
              nazionePagatore: "IT"
              e-mailPagatore: "mario.rossi@host.eu"
            datiPagamento:
              codiceEsitoPagamento: "1"
              importoTotalePagato: "0.00"
              identificativoUnivocoVersamento: "154340602921782"
              CodiceContestoPagamento: "281120181253443049"
              datiSingoloPagamento:
                - singoloImportoPagato: "0.00"
                  esitoSingoloPagamento: "Conto insufficiente"
                  dataEsitoSingoloPagamento: "2018-11-28"
                  identificativoUnivocoRiscossione: "n/a"
                  causaleVersamento: "/RFB/154340602921782/45.01/TXT/Pagamento servizi"
                  datiSpecificiRiscossione: "9/SERVIZIO_1A"
                  commissioniApplicatePSP: null
                  allegatoRicevuta: null    
    RppIndex:
      type: object
      allOf:
        - $ref: '#/components/schemas/RppBase'
        - type: object
          required:
            - href
            - pendenza
          properties:
            href:
              type: string
              description: URL della rpp
              example: "/rpps/01234567890/154340602921782/281120181253443049"
            pendenza:
              type: string
              description: Url alla pendenza oggetto della richiesta di pagamento    
              example: "/pendenze/A2A_12345/abcde12345"        
    Rpps:
      type: object
      allOf:
        - $ref: '#/components/schemas/Lista' 
        - type: object
          properties:
            items:
              type: array
              items: 
                $ref: '#/components/schemas/RppIndex'                                
    Segnalazione:
      type: object
      required:
        - codice
        - descrizione
      properties:
        data:
          type: string
          format: date-time
          example: '2018-12-31T12:53:49'
        codice:
          type: string
          example: '0013'
        descrizione:
          type: string   
          example: 'Pagamento rendicontato senza RPT'
        dettaglio:
          type: string
          example: 'Acquisita rendicontazione senza RPT nel flusso ABC-1234-DEFG'             
    Soggetto:
      description: dati anagrafici di un versante o pagatore.
      type: object
      required:
        - tipo
        - identificativo
      properties:
        tipo:
          $ref: "#/components/schemas/TipoSoggetto"
        identificativo:
          description: codice fiscale o partita iva del soggetto
          type: string
          example: RSSMRA30A01H501I
          minLength: 1
          maxLength: 35
        anagrafica:
          description: nome e cognome o altra ragione sociale del soggetto
          type: string
          example: Mario Rossi
          minLength: 1
          maxLength: 70
        indirizzo:
          type: string
          example: Piazza della Vittoria
          minLength: 1
          maxLength: 70
        civico:
          type: string
          example: 10/A
          minLength: 1
          maxLength: 16
        cap:
          type: string
          example: 00000
          minLength: 1
          maxLength: 16
        localita:
          type: string
          example: Roma
          minLength: 1
          maxLength: 35
        provincia:
          type: string
          example: Roma
          minLength: 1
          maxLength: 35
        nazione:
          type: string
          example: IT
          pattern: "[A-Z]{2,2}"
        email:
          type: string
          example: mario.rossi@host.eu
          pattern: "[A-Za-z0-9_]+([\\-\\+\\.'][A-Za-z0-9_]+)*@[A-Za-z0-9_]+([\\-\\.][A-Za-z0-9_]+)*\\.[A-Za-z0-9_]+([\\-\\.][A-Za-z0-9_]+)*"
        cellulare:
          type: string
          example: +39 000 1234567    
          pattern: "\\+[0-9]{2,2}\\s[0-9]{3,3}\\-[0-9]{7,7}" 
    StatoAvviso:
      description: Stato dell'avviso
      example: Non pagato
      type: string
      enum:
        - Pagato
        - Non pagato
        - Scaduto
        - Annullato
    StatoPagamento:
      type: string
      example: Eseguito
      enum:
        - In corso
        - Eseguito
        - Non eseguito
        - Parzialmente eseguito
        - Annullato
        - Fallito                         
    StatoPendenza:
      example: Pagata
      type: string
      enum:
        - Pagata
        - Non pagata
        - Parzialmente pagata
        - Annullata
        - Scaduta 
    StatoVocePendenza:
      type: string
      description: Stato della voce di pagamento
      enum:
        - Eseguito 
        - Non eseguito
        - Anomalo            
    TassonomiaAvviso:
      description: Macro categoria della pendenza Agid
      type: string
      enum:
        - Cartelle esattoriali
        - Diritti e concessioni
        - Imposte e tasse
        - IMU, TASI e altre tasse comunali
        - Ingressi a mostre e musei
        - Multe e sanzioni amministrative
        - Previdenza e infortuni
        - Servizi erogati dal comune
        - Servizi erogati da altri enti
        - Servizi scolastici
        - Tassa automobilistica
        - Ticket e prestazioni sanitarie
        - Trasporti, mobilità e parcheggi
      example: 
        Ticket e prestazioni sanitarie                       
    TipoAutorizzazione:
      type: array
      items:
        type: string
        enum:
         - Lettura
         - Scrittura
         - Esecuzione
      example:
        - Lettura
        - Scrittura 
    TipoAutenticazioneSoggetto:
      type: string
      enum:
        - CNS
        - USR
        - OTH
        - N/A
      description: modalita' di autenticazione del soggetto versante         
    TipoContabilita:
      description: Tipologia di codifica del capitolo di bilancio
      type: string
      enum:
        - CAPITOLO
        - SPECIALE
        - SIOPE
        - ALTRO
      example: SIOPE                            
    TipoEntrata:
      type: object
      required:
       - idEntrata
       - tipoContabilita
       - codiceContabilita
      properties:
        idEntrata:
          type: string
          example: IMU
        tipoContabilita:
          $ref: '#/components/schemas/TipoContabilita'
        codiceContabilita:
          description: Codifica del capitolo di bilancio
          type: string
          example: 3321
          minLength: 1
          maxLength: 135          
    TipoRiferimentoVocePendenza:
      type: object              
      oneOf:
        - $ref: '#/components/schemas/RiferimentoEntrata'
        - $ref: '#/components/schemas/Entrata'        
        - $ref: '#/components/schemas/Bollo'            
    TipoServizio:
      type: string
      enum:
        - Anagrafica PagoPA
        - Anagrafica Creditore
        - Anagrafica Applicazioni
        - Anagrafica Ruoli
        - Pagamenti e Pendenze
        - Rendicontazioni e Incassi
        - Giornale degli Eventi
        - Configurazione e manutenzione
      example:
        Pendenze e Pagamenti             
    TipoSoggetto:
      description: >-
        tipologia di soggetto, se persona fisica (F) o giuridica
        (G)
      type: string
      enum:
        - G
        - F
      example: F                     
    UnitaOperativa:
      type: object
      required: 
        - ragioneSociale
      properties:
        idUnitaOperativa:
          type: string
          description: Codice fiscale
          example: 01234567890
          minLength: 1
          maxLength: 35          
        ragioneSociale:
          type: string
          description: Ragione sociale
          example: Ufficio due
          minLength: 1
          maxLength: 70          
        indirizzo:
          type: string
          example: Piazza della Vittoria
          minLength: 1
          maxLength: 70
        civico:
          type: string
          example: 10/A
          minLength: 1
          maxLength: 16
        cap:
          type: string
          example: 00000
          minLength: 1
          maxLength: 16
        localita:
          type: string
          example: Roma
          minLength: 1
          maxLength: 35
        provincia:
          type: string
          example: Roma
          minLength: 1
          maxLength: 35
        nazione:
          type: string
          example: IT
          pattern: "[A-Z]{2,2}"
        email:
          type: string
          description: Posta elettronica ordinaria
          example:  peo@creditore.it  
          pattern: "[A-Za-z0-9_]+([\\-\\+\\.'][A-Za-z0-9_]+)*@[A-Za-z0-9_]+([\\-\\.][A-Za-z0-9_]+)*\\.[A-Za-z0-9_]+([\\-\\.][A-Za-z0-9_]+)*"          
        pec:
          type: string
          description: Posta elettronica certificata
          example:  peo@creditore.it  
          pattern: "[A-Za-z0-9_]+([\\-\\+\\.'][A-Za-z0-9_]+)*@[A-Za-z0-9_]+([\\-\\.][A-Za-z0-9_]+)*\\.[A-Za-z0-9_]+([\\-\\.][A-Za-z0-9_]+)*" 
        tel:
          type: string
          description: Numero di telefono dell'help desk di primo livello
          example: 021234567890  
        fax:
          type: string
          description: Numero di fax dell'help desk di primo livello
          example: 021234567890           
        web:
          type: string
          description: Url del sito web
          example: http://www.comune.it/
        area:
          type: string
          description: Nome dell'area di competenza
          example: Affari generali e istituzionali  
    VocePendenza:
      allOf:
        - $ref: "#/components/schemas/NuovaVocePendenza"
        - type: object
          required:
            - indice
            - stato
          properties:
            indice:
              type: number
              description: indice di voce all'interno della pendenza
              example: 1
              minimum: 1
              maximum: 5
            stato:
              $ref: "#/components/schemas/StatoVocePendenza"
